# DaoHangKaoHe
导航组的考核作业
这个作业是在Visual Studio 2022上面运行的,用C++编写的，需要添加openCV_4.10.0（需要在包含目录，库目录和附加依赖项中分别添加）
我的大致做法：
这里我主要是先对图像进行一系列处理（高斯模糊，HSV转化，膨胀函数等）然后通过滑动条手动试出tag的HSV的大致范围，然后获得掩膜，然后获得筛出的各个轮廓的点。
用轮廓围成的面积进行了二次筛选，将一些小噪点去除，然后用多边形拟合获取四个角的点集并画上边界线。
之后对四个角标红（我觉得这个是特征点），然后我用绿色矩阵在最外层再次框选了一下tag。（额，其实我不太清楚为什么要这样做，但网上很多教程都要求这样，我猜测是方便后期识别）
用solvePnP算法算出旋转，平移向量（我使用的是EPNP解算）（默认没有畸变）
之后将旋转向量转化为旋转矩阵，获取相机坐标系坐标。
角度我直接用旋转矩阵去乘以（0，0，1）再加平移向量获得的相机坐标系的法向量。（不知道这个做法对不对，我个人是这么认为的）
距离这里我用if判断了一下，误差很小，我就直接用像素中的宽作为tag的宽（因为倾斜的角度比较小）用相似三角形算的距离。

这儿基本就是我的全部思路了（哦对了由于最开始基本都是视觉的内容所以我给的名字是视觉，后面又改导航了，但没改干净，所以里面文件名有些可能比较乱(｡í _ ì｡)）

学长给个机会吧，真的已经很尽力了٩(ŏ﹏ŏ、)۶
